<div class="library-button" [routerLink]="libraryItem.path">
  <h3>{{ libraryItem.title }}</h3>
</div>
<ng-container *ngIf="userService.authUser$ | async as authUser">
  <div class="full-vertical-divider"></div>
  <ng-container *ngIf="gameService.navigationGames$ | async as navigationGames">
    <img
      *ngFor="let game of navigationGames"
      class="game hover-card"
      [routerLink]="game.selectedGameRoutePath"
      [ngSrc]="game.iconUri"
      [width]="40"
      [height]="40"
      [priority]="true"
    />
  </ng-container>
  <button
    class="add-button dropdown hover"
    (click)="toggleAddDropdown($event)"
    [disabled]="!authUser.active"
  >
    <img src="../../../assets/icons/bookmark.svg" />
    <div
      class="dropdown-base"
      [style.display]="state.isAddDropdownOpen ? undefined : 'none'"
    >
      <div class="searchbar">
        <img src="../../../../assets/icons/magnifying-glass.svg" />
        <input
          class="text-field-searchbar"
          type="text"
          [(ngModel)]="search"
          (keydown)="debounceSearch()"
          placeholder="Search"
        />
      </div>
      <div class="full-horizontal-divider"></div>
      <ng-container *ngIf="gameService.dropdownGames$ | async as dropdownGames">
        <ng-container
          *ngIf="gameService.navigationGames$ | async as navigationGames"
        >
          <ng-container *ngIf="dropdownGames.length">
            <div
              *ngFor="let game of dropdownGames"
              class="dropdown-option"
              [ngClass]="{
                'hover-card': !isNavigationGame(navigationGames, game),
                disabled: isNavigationGame(navigationGames, game)
              }"
              (click)="onAddNavigationGame(navigationGames, game)"
            >
              <div>
                <img src="../../../../assets/icons/add-green.svg" />
              </div>
              <p class="dropdown-option-text">
                {{ game.name }}
              </p>
            </div>
          </ng-container>
          <div *ngIf="!dropdownGames.length" class="dropdown-option">
            <p class="dropdown-option-text">No results found</p>
          </div>
        </ng-container>
      </ng-container>
    </div>
  </button>
</ng-container>
