<div class="dialog">
  <div class="dialog-main-container" #infiniteScrollContainerRef>
    <ng-container
      *ngIf="proposalService.selectedProposal$ | async as selectedProposal"
    >
      <dipnoi-proposal-content
        [proposal]="selectedProposal"
      ></dipnoi-proposal-content>
      <div class="inset-horizontal-divider"></div>
      <ng-container
        *ngIf="
          selectedProposal.isInitialPhase ||
          selectedProposal.isPendingSpecification ||
          selectedProposal.isPendingReview
        "
      >
        <ng-container *ngIf="pollService.polls$ | async as polls">
          <div class="poll-section">
            <dipnoi-poll *ngFor="let poll of polls" [poll]="poll"></dipnoi-poll>
          </div>
          <div *ngIf="polls.length" class="horizontal-divider"></div>
        </ng-container>
      </ng-container>
      <h2>Comments ({{ selectedProposal.numComments }})</h2>
    </ng-container>
    <dipnoi-comment-list
      [infiniteScrollContainerRef]="infiniteScrollContainerRef"
      [proposalId]="proposalId"
    ></dipnoi-comment-list>
  </div>
  <div class="dialog-side-panel">
    <ng-container
      *ngIf="proposalService.selectedProposal$ | async as selectedProposal"
    >
      <dipnoi-proposal-stats
        [proposal]="selectedProposal"
      ></dipnoi-proposal-stats>
    </ng-container>
  </div>
</div>
