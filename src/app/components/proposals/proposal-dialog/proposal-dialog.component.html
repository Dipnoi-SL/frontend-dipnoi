<div class="wrapper">
  <div class="content" #infiniteScrollContainerRef>
    <ng-container
      *ngIf="proposalService.selectedProposal$ | async as selectedProposal"
    >
      <dipnoi-proposal-content
        [proposal]="selectedProposal"
      ></dipnoi-proposal-content>
      <ng-container
        *ngIf="
          selectedProposal.isInitialPhase ||
          selectedProposal.isPendingSpecification ||
          selectedProposal.isPendingReview
        "
      >
        <div class="horizontal-divider"></div>
        <ng-container *ngIf="pollService.polls$ | async as polls">
          <div class="poll-section">
            <dipnoi-poll *ngFor="let poll of polls" [poll]="poll"></dipnoi-poll>
          </div>
        </ng-container>
      </ng-container>
      <div class="horizontal-divider"></div>
      <h2>Comments ({{ selectedProposal.numComments }})</h2>
    </ng-container>
    <dipnoi-comment-list
      [infiniteScrollContainerRef]="infiniteScrollContainerRef"
      [proposalId]="proposalId"
    ></dipnoi-comment-list>
  </div>
  <div class="stats">
    <ng-container
      *ngIf="proposalService.selectedProposal$ | async as selectedProposal"
    >
      <dipnoi-proposal-stats
        [proposal]="selectedProposal"
      ></dipnoi-proposal-stats>
    </ng-container>
  </div>
</div>
