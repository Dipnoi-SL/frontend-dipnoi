<ng-container *ngIf="state$ | async as state">
  <h2>Comments ({{ state.meta?.itemCount ?? 0 }})</h2>
  <div class="creation-container">
    <div class="avatar"></div>
    <div>
      <input type="text" placeholder="Add a comment..." />
    </div>
  </div>
  <div
    class="wrapper"
    infiniteScroll
    insufficientItems
    [existingItems]="state.comments?.length ?? 0"
    [containerRef]="infiniteScrollContainerRef"
    (loadMoreItems)="onScrollEnd()"
    [scrollWindow]="false"
    (scrolled)="onScrollEnd()"
    [infiniteScrollContainer]="infiniteScrollContainerRef"
    [fromRoot]="true"
    [infiniteScrollDistance]="0"
  >
    <div *ngFor="let comment of state.comments">
      <dipnoi-comment [comment]="comment"></dipnoi-comment>
    </div>
  </div>
</ng-container>
