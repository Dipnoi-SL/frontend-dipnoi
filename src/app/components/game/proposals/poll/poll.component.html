<div class="poll">
  <h5>{{ poll.label }}</h5>
  <div class="button-row">
    <ng-container *ngIf="{ data: userService.authUser$ | async } as authUser">
      <div
        class="button-base left hover-card"
        (click)="onVote(true)"
        [ngClass]="{
          disabled: !authUser.data?.active,
          'selected-green': !!poll.myInterestVote,
          'hover-card': !poll.myInterestVote
        }"
      >
        <p
          class="button-label"
          [ngClass]="{ 'selected-label': !!poll.myInterestVote }"
        >
          Yes
        </p>
      </div>

      <div class="bar-container">
        <div class="bar-info">
          <small>Yes</small>
          <small>{{ poll.positiveValue }}</small>
        </div>
        <div class="bar">
          <div
            class="bar-fill success-background"
            [ngStyle]="{ width: poll.positiveRatio + '%' }"
          ></div>
        </div>
      </div>
    </ng-container>
  </div>

  <div class="button-row">
    <ng-container *ngIf="{ data: userService.authUser$ | async } as authUser">
      <div
        class="button-base center hover-card"
        (click)="onVote(null)"
        [ngClass]="{
          disabled: !authUser.data?.active,
          'selected-yellow': poll.myInterestVote === null,
          'hover-card': poll.myInterestVote !== null
        }"
      >
        <p
          class="button-label"
          [ngClass]="{ 'selected-label': poll.myInterestVote === null }"
        >
          Skip
        </p>
      </div>
      <div class="bar-container">
        <div class="bar-info">
          <small>Skip</small>
          <small>{{ poll.nullValue }}</small>
        </div>
        <div class="bar">
          <div
            class="bar-fill warning-background"
            [ngStyle]="{ width: poll.nullRatio + '%' }"
          ></div>
        </div>
      </div>
    </ng-container>
  </div>

  <div class="button-row">
    <ng-container *ngIf="{ data: userService.authUser$ | async } as authUser">
      <div
        class="button-base right hover-card"
        (click)="onVote(false)"
        [ngClass]="{
          disabled: !authUser.data?.active,
          'selected-red': poll.myInterestVote === false,
          'hover-card': poll.myInterestVote !== false
        }"
      >
        <p
          class="button-label"
          [ngClass]="{ 'selected-label': poll.myInterestVote === false }"
        >
          No
        </p>
      </div>

      <div class="bar-container">
        <div class="bar-info">
          <small>No</small>
          <small>{{ poll.negativeValue }}</small>
        </div>
        <div class="bar">
          <div
            class="bar-fill error-background"
            [ngStyle]="{ width: poll.negativeRatio + '%' }"
          ></div>
        </div>
      </div>
    </ng-container>
  </div>
</div>
